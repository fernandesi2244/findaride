import{e as b}from"./index-b1376d93.js";import"./axios_service-04c0cfa1.js";import{t as z,u as l,o as a,c,a as t,F as f,k,l as n,g as v,m as N,n as $,q as S,b as C,d as M}from"./vendor-7cc8a583.js";import{_ as L}from"./AddTripForm-d32a66fc.js";function w(i){return new Date(i).toLocaleDateString()}function m(i){return new Date(i).toLocaleTimeString()}function y(i){return i.split(",")[0]}function H(i){let d=[];for(let r of i)d.push(`${r.first_name} ${r.last_name}`);return d.join(", ")}const j={key:0},I=t("h4",{class:"mt-2"},"No trips yet.",-1),B=[I],J={key:1},A={class:"accordion",id:"accordion"},U={class:"accordion-header"},F=["data-bs-target"],P=["id"],W={class:"accordion-body"},E={class:"mb-2"},O={class:"text-start"},G=t("h6",{class:"mt-4 text-start"},"Join requests",-1),K={key:0},Q=t("p",{class:"text-start"},"No requests to join yet.",-1),X=[Q],Y={key:1,class:"table-responsive"},Z={class:"table bdr"},tt=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"column"},"Name"),t("th",{scope:"col",class:"column"},"Min Time"),t("th",{scope:"col",class:"column"},"Max Time"),t("th",{scope:"col",class:"column"},"Departure"),t("th",{scope:"col",class:"column"},"Arrival"),t("th",{scope:"col",class:"column"},"Luggage"),t("th",{scope:"col",class:"columnend"})])],-1),et={key:0},st={key:1},ot=["onClick"],at=["onClick"],ct={__name:"TripsTab",props:["trips","userID"],setup(i){const d=i,{trips:r,userID:g}=z(d);function h(_){const o=`${b.joinRequests}${_}/?action=accept`;console.log(o);try{v.post(o)}catch(e){alert(e);return}}function p(_){const o=`${b.joinRequests}${_}/?action=reject`;try{v.post(o)}catch(e){alert(e);return}}return(_,o)=>l(r).length==0?(a(),c("div",j,B)):(a(),c("div",J,[t("div",A,[(a(!0),c(f,null,k(l(r),e=>(a(),c("div",{key:e.college+e.id,class:"accordion-item"},[t("h2",U,[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+e.college+e.id},n(l(y)(e.departure_location))+" → "+n(l(y)(e.arrival_location))+" @ "+n(l(m)(e.departure_time))+", "+n(l(w)(e.departure_time)),9,F)]),t("div",{id:e.college+e.id,class:"accordion-collapse collapse","data-bs-parent":"#accordion"},[t("div",W,[t("div",E,[t("h5",O,"Members: "+n(l(H)(e.participant_list)),1),G,e.join_requests.length==0?(a(),c("div",K,X)):(a(),c("div",Y,[t("table",Z,[tt,t("tbody",null,[(a(!0),c(f,null,k(e.join_requests,s=>(a(),c("tr",{key:s.id},[t("td",null,n(s.trip_request.user.first_name)+" "+n(s.trip_request.user.last_name),1),t("td",null,n(l(m)(s.trip_request.earliest_departure_time)),1),t("td",null,n(l(m)(s.trip_request.latest_departure_time)),1),t("td",null,n(l(y)(s.trip_request.departure_location)),1),t("td",null,n(l(y)(s.trip_request.arrival_location)),1),t("td",null,n(s.trip_request.num_luggage_bags),1),t("td",null,[s.participants_that_accepted.includes(l(g))?(a(),c("div",et," Waiting on others to respond ")):(a(),c("div",st,[t("button",{class:"btn btn-primary btn-sm me-1",onClick:u=>h(s.id)},"Accept",8,ot),t("button",{class:"btn btn-primary btn-sm ms-1",onClick:u=>p(s.id)},"Reject",8,at)]))])]))),128))])])]))])])],8,P)]))),128))])]))}},nt={key:0},lt=t("h4",{class:"mt-2"},"No trip requests yet.",-1),it=[lt],rt={key:1},dt={class:"accordion",id:"accordion"},_t={class:"accordion-header"},ut=["data-bs-target"],pt=["id"],ht={class:"accordion-body"},mt={class:"mb-2"},bt=t("h6",{class:"mt-2 text-start"},"Join Requests:",-1),vt={key:0},gt=t("p",{class:"text-start"},"No requests to join yet.",-1),yt=[gt],$t={key:1,class:"table-responsive"},ft={class:"table bdr"},kt=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"column"},"Time"),t("th",{scope:"col",class:"column"},"# Luggages"),t("th",{scope:"col",class:"column"},"# Riders"),t("th",{scope:"col",class:"column"},"Status"),t("th",{scope:"col",class:"columnend"})])],-1),Ct=t("td",null,"Status",-1),qt=["onClick"],xt=t("h6",{class:"mt-2 text-start"},"Cofirmation Requests:",-1),Mt={key:2},zt=t("p",{class:"text-start"},"No confirmations yet.",-1),wt=[zt],Dt={key:3,class:"table-responsive"},Tt={class:"table bdr"},Rt=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"column"},"Time"),t("th",{scope:"col",class:"column"},"# Luggages"),t("th",{scope:"col",class:"column"},"# Riders"),t("th",{scope:"col",class:"columnend"})])],-1),Vt=["onClick"],Nt=["onClick"],St={__name:"TripRequestsTab",props:["tripRequests"],setup(i){const d=i,{tripRequests:r}=z(d);function g(p){const _=`${b.confirmationRequests}${p}/?action=accept`;console.log(_);try{v.post(_)}catch(o){alert(o);return}}function h(p){const _=`${b.confirmationRequests}${p}/?action=reject`;try{v.post(_)}catch(o){alert(o);return}}return(p,_)=>l(r).length==0?(a(),c("div",nt,it)):(a(),c("div",rt,[t("div",dt,[(a(!0),c(f,null,k(l(r),o=>(a(),c("div",{key:"tripRequest"+o.id,class:"accordion-item"},[t("h2",_t,[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#tripRequest"+o.id},n(l(y)(o.departure_location))+" → "+n(l(y)(o.arrival_location))+" @ "+n(l(m)(o.earliest_departure_time))+" ~ "+n(l(m)(o.latest_departure_time))+", "+n(l(w)(o.latest_departure_time)),9,ut)]),t("div",{id:"tripRequest"+o.id,class:"accordion-collapse collapse","data-bs-parent":"#accordion"},[t("div",ht,[t("div",mt,[bt,o.join_requests.length==0?(a(),c("div",vt,yt)):(a(),c("div",$t,[t("table",ft,[kt,t("tbody",null,[(a(!0),c(f,null,k(o.join_requests,e=>(a(),c("tr",{key:e.id},[t("td",null,n(l(m)(e.trip.departure_time)),1),t("td",null,n(e.trip.num_luggage_bags),1),t("td",null,n(e.trip.num_participants),1),Ct,t("td",null,[t("button",{class:"btn btn-primary btn-sm ms-1",onClick:s=>p.rejectJoinRequest(e.id)},"Withdraw Request",8,qt)])]))),128))])])])),xt,o.confirmation_requests.length==0?(a(),c("div",Mt,wt)):(a(),c("div",Dt,[t("table",Tt,[Rt,t("tbody",null,[(a(!0),c(f,null,k(o.confirmation_requests,e=>(a(),c("tr",{key:e.id},[t("td",null,n(l(m)(e.join_request.trip.departure_time)),1),t("td",null,n(e.join_request.trip.num_luggage_bags),1),t("td",null,n(e.join_request.trip.num_participants),1),t("td",null,[t("button",{class:"btn btn-primary btn-sm me-1",onClick:s=>g(e.id)},"Accept",8,Vt),t("button",{class:"btn btn-primary btn-sm ms-1",onClick:s=>h(e.id)},"Reject",8,Nt)])]))),128))])])]))])])],8,pt)]))),128))])]))}};const Lt={class:"container-xl pt-4"},Ht={class:"row"},jt=t("div",{class:"col-2"},[t("div",{class:"nav flex-column nav-pills",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",style:{position:"sticky",top:"90px"}},[t("button",{class:"nav-link active text-start",id:"v-pills-addtrip-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-addtrip",type:"button",role:"tab","aria-controls":"v-pills-addtrip","aria-selected":"true"}," New Trip Request "),t("button",{class:"nav-link text-start",id:"v-pills-trips-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-trips",type:"button",role:"tab","aria-controls":"v-pills-trips","aria-selected":"false"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",class:"mb-1",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})]),M(" Trips ")]),t("button",{class:"nav-link text-start",id:"v-pills-triprequests-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-triprequests",type:"button",role:"tab","aria-controls":"v-pills-triprequests","aria-selected":"false"},[t("svg",{class:"mb-1",xmlns:"http://www.w3.org/2000/svg",height:"18",width:"18",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M16.254,3.399h-0.695V3.052c0-0.576-0.467-1.042-1.041-1.042c-0.576,0-1.043,0.467-1.043,1.042v0.347H6.526V3.052c0-0.576-0.467-1.042-1.042-1.042S4.441,2.476,4.441,3.052v0.347H3.747c-0.768,0-1.39,0.622-1.39,1.39v11.813c0,0.768,0.622,1.39,1.39,1.39h12.507c0.768,0,1.391-0.622,1.391-1.39V4.789C17.645,4.021,17.021,3.399,16.254,3.399z M14.17,3.052c0-0.192,0.154-0.348,0.348-0.348c0.191,0,0.348,0.156,0.348,0.348v0.347H14.17V3.052z M5.136,3.052c0-0.192,0.156-0.348,0.348-0.348S5.831,2.86,5.831,3.052v0.347H5.136V3.052z M16.949,16.602c0,0.384-0.311,0.694-0.695,0.694H3.747c-0.384,0-0.695-0.311-0.695-0.694V7.568h13.897V16.602z M16.949,6.874H3.052V4.789c0-0.383,0.311-0.695,0.695-0.695h12.507c0.385,0,0.695,0.312,0.695,0.695V6.874z M5.484,11.737c0.576,0,1.042-0.467,1.042-1.042c0-0.576-0.467-1.043-1.042-1.043s-1.042,0.467-1.042,1.043C4.441,11.271,4.908,11.737,5.484,11.737z M5.484,10.348c0.192,0,0.347,0.155,0.347,0.348c0,0.191-0.155,0.348-0.347,0.348s-0.348-0.156-0.348-0.348C5.136,10.503,5.292,10.348,5.484,10.348z M14.518,11.737c0.574,0,1.041-0.467,1.041-1.042c0-0.576-0.467-1.043-1.041-1.043c-0.576,0-1.043,0.467-1.043,1.043C13.475,11.271,13.941,11.737,14.518,11.737z M14.518,10.348c0.191,0,0.348,0.155,0.348,0.348c0,0.191-0.156,0.348-0.348,0.348c-0.193,0-0.348-0.156-0.348-0.348C14.17,10.503,14.324,10.348,14.518,10.348z M14.518,15.212c0.574,0,1.041-0.467,1.041-1.043c0-0.575-0.467-1.042-1.041-1.042c-0.576,0-1.043,0.467-1.043,1.042C13.475,14.745,13.941,15.212,14.518,15.212z M14.518,13.822c0.191,0,0.348,0.155,0.348,0.347c0,0.192-0.156,0.348-0.348,0.348c-0.193,0-0.348-0.155-0.348-0.348C14.17,13.978,14.324,13.822,14.518,13.822z M10,15.212c0.575,0,1.042-0.467,1.042-1.043c0-0.575-0.467-1.042-1.042-1.042c-0.576,0-1.042,0.467-1.042,1.042C8.958,14.745,9.425,15.212,10,15.212z M10,13.822c0.192,0,0.348,0.155,0.348,0.347c0,0.192-0.156,0.348-0.348,0.348s-0.348-0.155-0.348-0.348C9.653,13.978,9.809,13.822,10,13.822z M5.484,15.212c0.576,0,1.042-0.467,1.042-1.043c0-0.575-0.467-1.042-1.042-1.042s-1.042,0.467-1.042,1.042C4.441,14.745,4.908,15.212,5.484,15.212z M5.484,13.822c0.192,0,0.347,0.155,0.347,0.347c0,0.192-0.155,0.348-0.347,0.348s-0.348-0.155-0.348-0.348C5.136,13.978,5.292,13.822,5.484,13.822z M10,11.737c0.575,0,1.042-0.467,1.042-1.042c0-0.576-0.467-1.043-1.042-1.043c-0.576,0-1.042,0.467-1.042,1.043C8.958,11.271,9.425,11.737,10,11.737z M10,10.348c0.192,0,0.348,0.155,0.348,0.348c0,0.191-0.156,0.348-0.348,0.348s-0.348-0.156-0.348-0.348C9.653,10.503,9.809,10.348,10,10.348z"})]),M(" Trip Requests ")])])],-1),It={class:"col-10 tab-content px-4",id:"v-pills-tabContent"},Bt={class:"tab-pane fade",id:"v-pills-trips",role:"tabpanel","aria-labelledby":"v-pills-trips-tab"},Jt={class:"tab-pane fade",id:"v-pills-triprequests",role:"tabpanel","aria-labelledby":"v-pills-triprequests-tab"},At={class:"tab-pane fade show active",id:"v-pills-addtrip",role:"tabpanel","aria-labelledby":"v-pills-addtrip-tab"},Ut={__name:"Dashboard1",setup(i){const d=N({first_name:"",id:-1}),r=$([]),g=$([]),h=$(0);$({type:"default",id:0});const p=$(!1);S(async()=>{await _(),await o()});async function _(){const s=b.me,u=await v.get(s);Object.assign(d,u.data)}async function o(){const s=`${b.userTrips}${d.id}/`,u=await v.get(s);g.value=u.data.trip_requests,r.value=u.data.trips,h.value=u.data.id,console.log(h.value),console.log(r.value)}async function e(s){let u={address:s.from,postal_code:s.fromPostalCode},q={address:s.to,postal_code:s.toPostalCode},D=new Date(s.earliestDepartureTime).toUTCString(),T=new Date(s.latestDepartureTime).toUTCString(),x={earliest_departure_time:D,latest_departure_time:T,num_luggage_bags:s.luggageCount,user:d.id,departure_location:u,arrival_location:q,comment:s.comment};const R=b.tripRequest;console.log(x);try{await v.post(R,x)}catch(V){alert(V.response.data.error);return}p.value=!1,o()}return(s,u)=>(a(),c("div",Lt,[t("div",Ht,[jt,t("div",It,[t("div",Bt,[C(ct,{trips:r.value,userID:h.value},null,8,["trips","userID"])]),t("div",Jt,[C(St,{tripRequests:g.value},null,8,["tripRequests"])]),t("div",At,[C(L,{onAddTripRequest:e,onClose:u[0]||(u[0]=q=>p.value=!1)})])])])]))}},Ot={__name:"Dashboard1View",setup(i){return(d,r)=>(a(),c("main",null,[C(Ut)]))}};export{Ot as default};
