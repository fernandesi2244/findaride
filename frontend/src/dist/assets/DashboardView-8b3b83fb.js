import{_ as U}from"./AddTripForm-d32a66fc.js";import j from"./TripPage-ce627271.js";import H from"./TripRequestPage-99fe1ce1.js";import M from"./FrontPage-16c80df6.js";import{_ as O,e as k}from"./index-b1376d93.js";import"./axios_service-04c0cfa1.js";import{n as T,s as q,v as G,r as L,o as r,x as w,w as C,a as e,y as D,b as v,T as J,c as d,z as K,A as E,B as x,d as u,F as R,k as A,l as _,C as Q,p as X,i as Y,m as h,q as Z,g as S}from"./vendor-7cc8a583.js";function ee(t){return new Date(t).toLocaleDateString()}function te(t){return new Date(t).toLocaleTimeString()}function ae(t){return new Date(t).toLocaleString()}function ne(t){let s=t.split(",");return s.splice(-1),s.join(",")}const b=T(!1),ie=()=>b.value=!b.value,se=300,oe=38,re=q(()=>`${b.value?oe:se}px`);const le={props:{to:{type:String,required:!0},icon:{type:String,required:!0}},setup(t){const s=G();return{isActive:q(()=>s.path===t.to),collapsed:b}}},ce={key:0};function de(t,s,c,a,m,p){const f=L("router-link");return r(),w(f,{to:c.to,class:D(["link",{active:a.isActive}])},{default:C(()=>[e("i",{class:D(["icon",c.icon])},null,2),v(J,{name:"fade"},{default:C(()=>[a.collapsed?E("",!0):(r(),d("span",ce,[K(t.$slots,"default",{},void 0,!0)]))]),_:3})]),_:3},8,["to","class"])}const ue=O(le,[["render",de],["__scopeId","data-v-3a1cacb4"]]);const _e={props:["trips","tripRequests"],emits:["selectTrip","selectTripRequest","showTripForm"],methods:{clickTrip(t){console.log("selected trip"+t),this.$emit("selectTrip",t)},clickTripRequest(t){console.log("selected trip request "+t),this.$emit("selectTripRequest",t)},clickAddTrip(){console.log("clicked form"),this.$emit("showTripForm")}},components:{SidebarLink:ue},setup(t){const s=x(t,"trips"),c=x(t,"tripRequests");return{collapsed:b,toggleSidebar:ie,sidebarWidth:re,tripsArray:s,tripRequestsArray:c,getDate:ee,getDateTime:ae,getTime:te,cleanLocation:ne}}},l=t=>(X("data-v-576f30bf"),t=t(),Y(),t),me={key:0},pe=l(()=>e("div",null,"V",-1)),ge=l(()=>e("div",null,"S",-1)),ve=[pe,ge],fe={key:1,class:"text-size"},he={class:"section-header"},Te=l(()=>e("h4",{class:"left"},"Trips",-1)),be=["onClick"],ye={class:"card"},ke=l(()=>e("strong",null,"From:",-1)),Se=l(()=>e("strong",null,"To:",-1)),Ce=l(()=>e("strong",null,"Departure Date:",-1)),De=l(()=>e("strong",null,"Departure Time:",-1)),xe=l(()=>e("strong",null,"Luggage Count:",-1)),Re=l(()=>e("h4",{class:"left"},"Requests",-1)),Ae=["onClick"],Oe={class:"card"},qe=l(()=>e("strong",null,"From:",-1)),Le=l(()=>e("strong",null,"To:",-1)),we=l(()=>e("strong",null,"Departure Date:",-1)),Ee=l(()=>e("strong",null,"Departure Time:",-1)),Fe=l(()=>e("strong",null,"Luggage Count:",-1)),Ie=l(()=>e("i",{class:"fas fa-angle-double-left"},null,-1)),We=[Ie];function $e(t,s,c,a,m,p){const f=L("router-link");return r(),d("div",{class:"sidebar",style:Q([{width:a.sidebarWidth},{"overflow-y":"auto"}])},[e("h1",null,[a.collapsed?(r(),d("span",me,ve)):(r(),d("span",fe,[v(f,{to:"/",style:{"text-decoration":"none",color:"inherit",cursor:"pointer"}},{default:C(()=>[u("findaride")]),_:1})]))]),e("div",he,[e("button",{onClick:s[0]||(s[0]=(...n)=>p.clickAddTrip&&p.clickAddTrip(...n)),class:"btn add-trip-btn"},"+ Create New Request")]),Te,(r(!0),d(R,null,A(a.tripsArray,n=>(r(),d("div",{key:n.id},[e("button",{onClick:y=>p.clickTrip(n.id)},[e("div",ye,[e("div",null,[ke,u(" "+_(a.cleanLocation(n.departure_location)),1)]),e("div",null,[Se,u(" "+_(a.cleanLocation(n.arrival_location)),1)]),e("div",null,[Ce,u(" "+_(a.getDate(n.departure_time)),1)]),e("div",null,[De,u(" "+_(a.getTime(n.departure_time)),1)]),e("div",null,[xe,u(" "+_(n.num_luggage_bags),1)])])],8,be)]))),128)),Re,(r(!0),d(R,null,A(a.tripRequestsArray,n=>(r(),d("div",{key:n.id},[e("button",{onClick:y=>p.clickTripRequest(n.id)},[e("div",Oe,[e("div",null,[qe,u(" "+_(a.cleanLocation(n.departure_location)),1)]),e("div",null,[Le,u(" "+_(a.cleanLocation(n.arrival_location)),1)]),e("div",null,[we,u(" "+_(a.getDate(n.earliest_departure_time)),1)]),e("div",null,[Ee,u(_(a.getTime(n.earliest_departure_time))+" â†’ "+_(a.getTime(n.latest_departure_time)),1)]),e("div",null,[Fe,u(" "+_(n.num_luggage_bags),1)])])],8,Ae)]))),128)),e("span",{class:D(["collapse-icon",{"rotate-180":a.collapsed}]),onClick:s[1]||(s[1]=(...n)=>a.toggleSidebar&&a.toggleSidebar(...n))},We,2)],4)}const Be=O(_e,[["render",$e],["__scopeId","data-v-576f30bf"]]);const Ve={class:"dashboard"},Ne={class:"padding"},Pe={class:"card padding"},ze={key:0},Ue={key:1},je={key:2},He={__name:"Dashboard",setup(t){h({minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Friend Center",arrival:"EWR",name:"Me",email:"me@princeton.edu",phone:"666-666-6666",luggage:3}),h([{id:0,minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Friend Center",arrival:"EWR",name:"a",email:"a@princeton.edu",phone:"666-666-6666",luggage:1},{id:1,minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Admissions Center",arrival:"EWR",name:"b",email:"bbbbb@princeton.edu",phone:"666-666-6667",luggage:2}]),h([{id:0,minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Friend Center",arrival:"EWR",name:"a",email:"a@princeton.edu",phone:"666-666-6666",luggage:1},{id:1,minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Admissions Center",arrival:"EWR",name:"b",email:"bbbbb@princeton.edu",phone:"666-666-6667",luggage:2}]),h([{id:0,status:"Sent",minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Friend Center",arrival:"EWR",name:"a",email:"a@princeton.edu",phone:"666-666-6666",luggage:1},{id:1,status:"Rejected",minTime:"Oct. 13, 10:00am",maxTime:"Oct. 13, 1:00pm",departure:"Admissions Center",arrival:"EWR",name:"b",email:"bbbbb@princeton.edu",phone:"666-666-6667",luggage:2}]);const s=h({first_name:"",id:-1}),c=T([]),a=T([]),m=T({type:"default",id:0}),p=T(!1);Z(async()=>{await f(),await n()});async function f(){const i=k.me,o=await S.get(i);Object.assign(s,o.data)}async function n(){const i=`${k.userTrips}${s.id}/`,o=await S.get(i);a.value=o.data.trip_requests,c.value=o.data.trips,console.log(c.value)}async function y(i){let o={address:i.from,postal_code:i.fromPostalCode},g={address:i.to,postal_code:i.toPostalCode},B=new Date(i.earliestDepartureTime).toUTCString(),V=new Date(i.latestDepartureTime).toUTCString(),N={earliest_departure_time:B,latest_departure_time:V,num_luggage_bags:i.luggageCount,user:s.id,departure_location:o,arrival_location:g,comment:i.comment};const P=k.tripRequest;try{await S.post(P,N)}catch(z){alert(formatError(z.response.data.error));return}p.value=!1,n()}function F(i){m.value.type="trip",m.value.id=i}function I(i){m.value.type="request",m.value.id=i}function W(i){const o=c.value.findIndex(g=>g.id===i);if(o!=-1)return c.value[o]}function $(i){const o=a.value.findIndex(g=>g.id===i);if(o!=-1)return a.value[o]}return(i,o)=>(r(),d("div",Ve,[v(Be,{onSelectTrip:F,onSelectTripRequest:I,onShowTripForm:o[0]||(o[0]=g=>p.value=!0),trips:c.value,tripRequests:a.value},null,8,["trips","tripRequests"]),e("div",Ne,[e("div",Pe,[m.value.type==="trip"?(r(),d("div",ze,[v(j,{trip:W(m.value.id)},null,8,["trip"])])):m.value.type==="request"?(r(),d("div",Ue,[v(H,{tripRequest:$(m.value.id)},null,8,["tripRequest"])])):(r(),d("div",je,[v(M,{user:"user"})]))])]),p.value?(r(),w(U,{key:0,onAddTripRequest:y,onClose:o[1]||(o[1]=g=>p.value=!1)})):E("",!0)]))}},Ze={__name:"DashboardView",setup(t){return(s,c)=>(r(),d("main",null,[v(He)]))}};export{Ze as default};
